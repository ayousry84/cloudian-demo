FROM rockylinux:8

# Update system and install SSH server
RUN dnf update -y && \
    dnf install -y openssh-server

# Generate SSH host keys
RUN ssh-keygen -A

# Set root password
RUN echo 'root:password123' | chpasswd

# Configure SSH
RUN echo 'PermitRootLogin yes' >> /etc/ssh/sshd_config && \
    echo 'PasswordAuthentication yes' >> /etc/ssh/sshd_config

# Expose SSH port
EXPOSE 22
